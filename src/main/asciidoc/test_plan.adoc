// -- Table of Contents
:toc:
:toclevels: 3
:toc-title: Inhaltsverzeichnis
:toc-placement!:
:sectanchors:
:numbered:


= Test-Plan

Dieser Testplan stellt eine vereinfachte Version der IEEE 829-1998 Vorlage dar.

toc::[]

== Einführung
Dieses Dokument soll einen Überblick geben, wie getestet werden soll, inwiefern die Qualität der Anwendung gewährleistet wird.
Dabei werden die zu betrachteten Teilbereiche, die verwendeten Testverfahren und notwendige Rahmenbedingungen festgelegt.

Ebenfalls soll es für das Entwicklerteam eine Unterstützung bei ihrer Arbeit sein und unabhängigen Bewertern die Möglichkeit bieten,
die Qualität der Anwendung einzuschätzen.

== Aufbau der Testbezeichner
Nach welchem Schema sind die Tests benannt?

=== Department
[options="headers"]
|===
| Buchstabe | Zugehörigkeit des Departments
| T         | TenantDepartment
| P         | PlotDepartment
| F         | FinanceDepartment
| N         | NewsDepartment
| M         | MessageDepartment
| C         | ComplaintDepartment
| T         | TenantDepartment
| A         | ApplicationDepartment
| AP        | AppointmentDepartment
|===

=== Art
[options="headers"]
|===
| Buchstabe | Art des Tests
| U         | UnitTest
| I         | Integrationstest
|===

Die Test ID wird mit der fortlaufenden Zahl zur Identifikation des Tests im jeweiligen Department angehängt.

Beispiel: AP-U-01, P-U-02, F-I-03

== Test Gegenstände
Test Gegenstände sind die jeweiligen Verwaltungsebenen, bzw. die ausführenden Klassen (z.B. Controller).

== Zu testende Funktionalitäten
Zu testen sind die eigenen erstellten Klassen, welche die Eingaben entgegennehmen, diese verarbeiten oder an andere Bereiche weitergeben.

== Nicht zu testende Funktionalitäten
Bibliotheken von Drittanbietern (eigene Tests beschränken sich auf Schnittstelle, bzw. Zusammenspiel).
Zu diesen gehören beispielsweise Spring, Salespoint, Maven, Thymeleaf.

== Herangehensweise
- Klassen werden mit JUnit getestet.
- Integrationstest nach Bottom-Up Prinzip

== Umgebungsvoraussetzungen
*  Ein einsatzfähiges Computer System
* Zu testende Programme (Testobjekte)
* JUnit zur Erstellung von Unit Tests

== Testfälle und Verantwortlichkeit

=== TenantDepartment
zuständig: Isabell Zorr, Franziska Kiel
[options="headers"]
|===
|ID |Anwendungsfall |Vorbedingungen |Eingabe |Ausgabe
|U-U-010
| neuer Pächter wird erstellt
|Bewerbung wurde angenommen und Vorstandsvorsitzender ist eingeloggt
|Vorstandsvorsitzender füllt alle Felder aus und klickt auf "hinzufügen"
|Pächter wird erfolgreich in die Datenbank aufgenommen

|U-U-011
|neuer Pächter wird erstellt
|Bewerbung wurde angenommen und Vorstandsvorsitzender ist eingeloggt
|Vorstandsvorsitzender füllt eine der Felder nicht aus oder nicht korrekt (z.B beim Namen dürfen keine Zahlen sein)
| es wird kein neuer Pächter hinzugefügt und eine Fehlermeldung erscheint, dass das Feld fehlerhaft aufgefüllt ist bzw. nicht ausgefüllt wurde

|U-U-020
|Pächter muss sein generiertes Passwort ändern
|Vorstandsvorsitzender hat eine Email an den Pächter mit einem generierten Passwort geschickt und Pächter ist angemeldet
|Pächter trägt sein generiertes Passwort in das vorhergesehene Feld ein und
 trägt zweimal richtig sein neues Passwort ein und Button zum Passwort ändern wird getätigt
|Passwort wird erfolgreich geändert

|U-U-021
|Pächter muss sein generiertes Passwort ändern
|Vorstandsvorsitzender hat eine Email an den Pächter mit einem generierten Passwort geschickt und Pächter ist angemeldet
| Er trägt sein altes Passwort inkorrekt in das vorhergesehene Feld ein und
trägt zweimal richtig sein neues Passwort ein ODER ein Feld für das neue
Passwort stimmt mit dem anderen nicht überein ODER ein oder mehr Felder wurden
nicht ausgefüllt. +
  Button zum Passwort ändern wird getätigt
| Passwort wird nicht geändert, Fehlermeldung erscheint

|U-U-030
| Vorstandsvorsitzender sucht in der Datenbank nach Pächter
| Vorstandsvorsitzender ist eingeloggt und befindet sich auf "Pächter verwalten"
| Manager tippt einen Namen in das Suchfeld und klickt auf Suchen
| Fall 1: der gesuchte Name wird in der Datenbank gefunden und alle Ergebnisse aufgelistet,
+
Fall 2: wenn kein Ergebnis gefunden wird so wird angezeigt, dass keine Pächter unter dieser
Suchanfrage gefunden worden

|U-U-040
|Pächter will sich einloggen
|Pächter befindet sich auf der Login Seite
|Pächter gibt falsches Passwort ein
|Pächter wird nicht eingeloggt -> Fehlermeldung erscheint

|U-U-041
|Pächter will sich einloggen
|Pächter befindet sich auf der Login Seite
|Pächter gibt richtiges Passwort ein
|Pächter wird erfolgreich eingeloggt und hat nun Zugriff auf authentifizierte Seiten

| U-U-050
| Pächter wird Vorpächter
| Vorstandsvorsitzender ist eingeloggt, Pächter hat Parzelle gekündigt, neuer Pächter ist vorhanden
| Vorstandsvorsitzender geht auf die Pächterverwaltung und auf die Detailseite des Pächters und betätigt den "Pächter deaktivieren"- Button
| Pächter wird in der Vorpächterliste seiner Parzelle aufgenommen, seine Daten werden anonymisiert

| U-U-051
| Pächter wird Vorpächter
| Vorstandsvorsitzender ist eingeloggt, Pächter hat Parzelle gekündigt
| Vorstandsvorsitzender geht auf die Pächterverwaltung und auf die Detailseite des Pächters und betätigt den "Pächter deaktivieren"- Button
|Fehlermeldung erscheint, dass ein Pächter nur deaktiviert werden kann, wenn für seine Parzelle ein Nachpächter bestimmt ist

| U-U-060
| Rolle eines Pächters ändern
| Vorstandsvorsitzender ist eingeloggt
| Vorstandsvorsitzender befindet sich auf der Detailseite eines Pächters, geht auf Rolle ändern und wählt aus Drop-Down neue Rolle an, geht auf Speichern
| Rolle vom Pächter wird erfolgreich geändert

|===

=== PlotDepartment
zuständig Ylvi Sarah Bachmann

[options="headers"]
|===
|ID   |Akzeptanztest ID |Anwendungsfall ID  |Anwendungsfall |Vorbedingungen |Eingabe |Ausgabe / Nachbedingung
|P-U-010
|
|
|Erstellen einer Parzelle
|Nutzer hat die Rolle Admin
|Parzellengröße, Wasserzähler, Stromzähler, Beschreibung
|Parzelle wird erstellt, Attribute in passendem Format

|P-U-011
|
|
|Erstellen einer Parzelle
|Nutzer hat andere Rolle als Admin
|Parzellengröße, Wasserzähler, Stromzähler, Beschreibung
|Fehlermeldung

|P-I-010
|**<<AT0010>>**
|**<<UC0010>>**
|Bewerben für eine Parzelle
|Parzelle hat den Status FREE
|Model mit Parzelle
|String "/createApplication"

|P-I-011
|
|**<<UC0010>>**
|Bewerben für eine Parzelle
|Parzelle hat den Status TAKEN
|Model mit Parzelle
|Fehlermeldung

|P-U-012
|**<<AT0010>>**
|**<<UC0010>>**
|Hinzufügen einer Bewerbung zu einer Parzelle
|Bewerbung für die Parzelle
|--
|Bewerbung ist im zugehörigen Attribut der Parzelle gespeichert

|P-I-012
|**<<AT0011>>**
|**<<UC0010>>**
|Ansehen von Bewerbungen für eine Parzelle
|Nutzer hat Rolle Obmann
|Model mit Parzelle
|Model mit Bewerbungen für die gegebene Parzelle

|P-I-013
|
|**<<UC0010>>**
|Ansehen von Bewerbungen für eine Parzelle
|Nutzer hat andere Rolle als Obmann
|Model mit Parzelle
|Fehlermeldung

|P-U-012
|**<<AT0012>>**
|**<<UC0010>>**
|Hinzufügen eines Hauptpächters
|angenomme Bewerbung für die Parzelle, Parzelle hat den Status FREE
|Parzelle, Bewerbung
|Jahr, Parzelle, Pächter

|P-I-014
|**<<AT0012>>**
|**<<UC0010>>**
|Hinzufügen eines Hauptpächters
|angenomme Bewerbung für die Parzelle, Parzelle hat den Status FREE
|--
|Model mit Jahr, Parzelle und Pächter

|P-U-013
|
|**<<UC0010>>**
|Hinzufügen eines Hauptpächters
|angenommene Bewerbung für die Parzelle
|Parzelle hat den Status TAKEN
|Fehlermeldung

|P-U-040
|
|
|Hinzufügen eines Nebenpächters
|Hauptpächter für Parzelle existiert, Nebenpächter hat einen User Account
|Name und Email des Nebenpächters
|Jahr, Parzelle und Pächter

|P-U-041
|
|
|Hinzufügen eines Nebenpächters
|Hauptpächter für Parzelle existiert, Nebenpächter hat keinen User Account
|Namen und Email des Nebenpächters
|Fehlermeldung

|P-I-040
|
|
|Hinzufügen eines Nebenpächters
|Hauptpächter für Parzelle existiert
|Model mit Parzelle
|Form mit Nebenpächtern der Parzelle

|P-I-041
|
|
|Hinzufügen eines Nebenpächters
|Hauptpächter für Parzelle existiert
|Form mit Email und Name des Nebenpächters, Parzelle
|Model mit Jahr, Parzelle und Pächter

|P-U-020
|**<<AT0021>>**
|**<<UC0020>>**
|Eintragen der geleisteten Pflichtstunden
|Nutzer hat die Rolle Obmann, Parzelle hat den Status TAKEN
|gewünschte Parzelle
|Parzelle und Summe der Pflichtstunden

|P-U-021
|
|**<<UC0020>>**
|Eintragen der geleisteten Pflichtstunden
|Nutzer hat die Rolle Obmann, Parzelle hat den Status FREE
|gewünschte Parzelle
|Fehlermeldung

|P-U-022
|**<<AT0021>>**
|**<<UC0020>>**
|Eintragen der geleisteten Pflichtstunden
|Parzelle hat den Status TAKEN
|Parzelle und Summe der Pflichtstunden
|Jahr, Parzelle und Summe der Pflichtstunden

|P-U-023
|
|**<<UC0020>>**
|Eintragen der geleisteten Pflichtstunden
|Nutzer hat andere Rolle als Obmann
|gewünschte Parzelle
|Fehlermeldung

|P-I-020
|**<<AT0021>>**
|**<<UC0020>>**
|Eintragen der geleisteten Pflichtstunden
|Nutzer hat die Rolle Obmann
|Model mit Parzelle
|Form mit geleisteten Pflichtstunden

|P-I-021
|**<<AT0021>>**
|**<<UC0020>>**
|Eintragen der geleisteten Pflichtstunden
|Nutzer hat die Rolle Obmann
|Form mit geleisteten Pflichtstunden, Parzelle
|Model mit Jahr, Parzelle und Summe der Pflichtstunden

|P-U-023
|
|
|Hinzufügen des Wasserzählerstands
|Nutzer hat die Rolle Obmann, Parzelle hat den Status TAKEN
|gewünschte Parzelle, Wasserzählerstand
|Wasserzählerstand ist im zugehörigen Attribut der Parzelle gespeichert

|P-I-023
|
|
|Hinzufügen des Wasserzählerstands
|Nutzer hat die Rolle Obmann
|Model mit Parzelle
|Form zum Eintragen des Wasserzählerstands

|P-U-030
|**<<AT0030>>**
|**<<UC0030>>**
|Eintragen des Elektrozählerstands
|Parzelle hat den Status TAKEN
|gewünschte Parzelle, Elektrozählerstand
|Elektrozählerstand ist im zugehörigen Attribut der Parzelle gespeichert

|P-U-031
|
|**<<UC0030>>**
|Eintragen des Elektrozählerstands
|Parzelle hat den Status FREE
|gewünschte Parzelle, Elektrozählerstand
|Fehlermeldung

|P-I-030
|**<<AT0030>>**
|**<<UC0030>>**
|Eintragen des Elektrozählerwerts
|Nutzer hat die Rolle Obmann
|Model mit Parzelle
|Form zum Eintragen des Elektrozählerstands

|P-I-032
|**<<AT0031>>**
|**<<UC0030>>**
|Aufrufen der Rechnungen
|Nutzer hat die Rolle Kassierer
|Parzelle
|Model mit allen Rechnungen für die Parzelle

|P-I-033
|**<<AT0031>>**
|**<<UC0030>>**
|Aufrufen der Rechnungen
|Nutzer hat die Rolle Pächter
|Parzelle
|Model mit Rechnungen mit gegebenem Nutzer für die Parzelle
|===

=== FinanceDepartment
zuständig: SangHyun Lee und Sascha Seiffert
[options="headers"]
|===
| ID      | Anwendungsfall                                 | Vorbedingungen                                              | Eingabe                                             | Ausgabe
| F-U-003 | Rechnen Wasserkosten einer Parzelle            | Wasserzählerstand einer Parzelle                            | Wasserzählerstand (und Wasserkosten pro Kubikmeter) | Ein Preis von Wasserkost einer Parzelle wird gerechnet
| F-U-005 | Rechnen Stromkosten einer Parzelle             | Stromzählerstand einer Parzelle                             | Stromzählerstand (und Stromkosten pro Kilowatt)     | Ein Preis von Stromkost einer Parzelle wird gerechnet
| F-U-007 | Rechnen Miete einer Parzelle                   | Größe einer Parzelle                                        | Größe der Parzelle (und Miete pro Quadratmeter)     | Eine jährliche Miete der Parzelle wird gerechnet
| F-U-015 | Schätzen fehlender Rechnungspositionen         | Rechnung existiert, alle bekannten Positionen sind angelegt | Alle Positionen                                     | Fehlende Kosten oder Verbräuche werden geschätzt
| F-U-020 | Rechnen eine jährliche Rechnung einer Parzelle | Parzelle enthält alle nötige Daten für Berechnung           | Wasser/Stromzählerstand und Größe der Parzelle      | Eine jährliche Rechnung der Parzelle wird erstellt
| F-U-023 | Erstellen eine jährliche Rechnung in PDF       | Rechnung ist erstellt                                       | Button                                              | Eine jährliche Rechnung der Parzelle wird in PDF erstellt
|===

=== NewsDepartment
zuständig: Muhammad Talal Anwar
[options="headers"]
|===
| ID      | Anwendungsfall                  | Vorbedingungen                                                                              | Eingabe           | Ausgabe
| N-U-010 | Einen neuen News Eintrag machen | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender                            | Text des Eintrags | Eintrag wird gespeichert
| N-U-020 | Einen News Eintrag bearbeiten   | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender, und die Eintrag existiert | Änderung          | Eintrag wird aktualisiert
| N-U-030 | Einen News Eintrag löschen      | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender, und die Eintrag existiert |                   | Eintrag wird gelöscht
|===

=== MessageDepartment
zuständig: Muhammad Talal Anwar
[options="headers"]
|===
| ID      | Anwendungsfall                                        | Vorbedingungen | Eingabe                  | Ausgabe
| M-I-010 | Eine normale Email ist ordnungsgemäß geschickt        |                | Nachricht                | erfolgreich Assertion Test durch E-mail Test Server (http://www.icegreen.com/greenmail/[GreenMail])
| M-I-020 | Eine Email mit Attachment ist ordnungsgemäß geschickt |                | Nachricht mit Attachment | erfolgreich Assertion Test durch E-mail Test Server (http://www.icegreen.com/greenmail/[GreenMail])
|===

=== ComplaintDepartment
zuständig: Muhammad Talal Anwar
[options="headers"]
|===
| ID      | Anwendungsfall                       | Vorbedingungen                                                               | Eingabe                  | Ausgabe
| C-U-010 | Eine Beschwerde erstellen            | Benutzer ist eingeloggt und hat die Rolle: Haupt-/Nebenpächter               | Subjekt und Beschreibung | Beschwerde wird gespeichert und einem Obmann zugeordnet
| C-U-020 | Eine Beschwerde bearbeiten           | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender oder Obmann | Änderung                 | Beschwerde wird aktualisiert
| C-U-030 | Zustand der Beschwerde ändern        | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender oder Obmann | Änderung                 | Zustand wird aktualisiert
| C-U-040 | Neuer Obmann zur Beschwerde zuordnen | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender             | Neuer Obmann auswählen   | Neuer Obmann wird zugeordnet
| C-U-050 | Eine Beschwerde löschen              | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender             |                          | Beschwerde wird gelöscht
|===

=== ApplicationDepartment
zuständig: Sascha Seiffert
[options="headers"]
|===
| ID      | Anwendungsfall                        | Vorbedingungen                                                   | Eingabe           | Ausgabe
| A-U-001 | Bewerbung erstellen       | Parzelle frei   | Name und E-Mail  | -
| A-U-011 | Bewerbung annehmen         | Bewerbung existiert, Status "new" | Button          | Eintrag wird aktualisiert
| A-U-012 | Bewerbung ablehnen            | Bewerbung existiert, Status "new" | Button         | Eintrag wird aktualisiert
| A-U-020 | Bewerbung abschließen  | Bewerbung für Parzelle mit Status "accepted"  | -  | neuer Tenant, alle Bewerbungen auf "hidden"
|===

=== AppointmentDepartment
zuständig: Albert Wellerdt
[options="headers"]
|===
| ID      | Anwendungsfall                        | Vorbedingungen                                                   | Eingabe           | Ausgabe
| AP-U-001 | Termin erstellen       | Zeit existiert für dieses Datum noch nicht   | Zeit, Datum  | Termin(Zeit, Datum)
| AP-U-011 | Termin löschen        | Termin existiert bereits | Button          | Eintrag wird gelöscht
| AP-U-012 | Termin bearbeiten            | Termin existiert bereits, neue Zeit existiert noch nicht | Button         | Termin wird aktualisiert
|===
