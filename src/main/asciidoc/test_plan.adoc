= Test-Plan

Dieser Testplan stellt eine vereinfachte Version der IEEE 829-1998 Vorlage dar.

== Einführung
Dieses Dokument soll einen Überblick geben, wie getestet werden soll, inwiefern die Qualität der Anwendung gewährleistet wird.
Dabei werden die zu betrachteten Teilbereiche, die verwendeten Testverfahren und notwendige Rahmenbedingungen festgelegt.

Ebenfalls soll es für das Entwicklerteam eine Unterstützung bei ihrer Arbeit sein und unabhängigen Bewertern die Möglichkeit bieten,
die Qualität der Anwendung einzuschätzen.

== Aufbau der Testbezeichner
Nach welchem Schema sind die Tests benannt?

1. Buchstabe: Zugehörigkeit des Departments +
T - TenantDepartment, P - PlotDepartment, F - FinanceDepartment, M - MessageDepartment
2. Buchstabe: Art des Tests +
U - UnitTest, I - Integrationstest
3. fortlaufende  Zahl zu Identifikation des Tests im jeweiligen Department

Bsp. +
U-U-01, P-U-02, F-I-03

== Test Gegenstände
Test Gegenstände sind die jeweiligen Verwaltungsebenen, bzw. die ausführenden Klassen (z.B. Controller).

== Zu testende Funktionalitäten
Zu testen sind die eigenen erstellten Klassen, welche die Eingaben entgegennehmen, diese verarbeiten oder an andere Bereiche weitergeben.

== Nicht zu testende Funktionalitäten
Bibliotheken von Drittanbietern (eigene Tests beschränken sich auf Schnittstelle, bzw. Zusammenspiel).
Zu diesen gehören beispielsweise Spring, Salespoint, Maven, Thymeleaf.

== Herangehensweise
- Klassen werden mit JUnit getestet.
- Integrationstest nach Bottom-Up Prinzip

== Umgebungsvoraussetzungen
*  Ein einsatzfähiges Computer System
* Zu testende Programme (Testobjekte)
* JUnit zur Erstellung von Unit Tests

== Testfälle und Verantwortlichkeit

=== TenantDepartment
zuständig: Isabell Zorr, Franziska Kiel
[options="headers"]
|===
|ID |Anwendungsfall |Vorbedingungen |Eingabe |Ausgabe
|U-U-010
| neuer Pächter wird erstellt
|Bewerbung wurde angenommen und Vorstandsvorsitzender ist eingeloggt
|Vorstandsvorsitzender füllt alle Felder aus und klickt auf "hinzufügen"
|Pächter wird erfolgreich in die Datenbank aufgenommen

|U-U-011
|neuer Pächter wird erstellt
|Bewerbung wurde angenommen und Vorstandsvorsitzender ist eingeloggt
|Vorstandsvorsitzender füllt eine der Felder nicht aus oder nicht korrekt (z.B beim Namen dürfen keine Zahlen sein)
| es wird kein neuer Pächter hinzugefügt und eine Fehlermeldung erscheint, dass das Feld fehlerhaft aufgefüllt ist bzw. nicht ausgefüllt wurde

|U-U-020
|Pächter muss sein generiertes Passwort ändern
|Vorstandsvorsitzender hat eine Email an den Pächter mit einem generierten Passwort geschickt und Pächter ist angemeldet
|Pächter trägt sein generiertes Passwort in das vorhergesehene Feld ein und
 trägt zweimal richtig sein neues Passwort ein und Button zum Passwort ändern wird getätigt
|Passwort wird erfolgreich geändert

|U-U-021
|Pächter muss sein generiertes Passwort ändern
|Vorstandsvorsitzender hat eine Email an den Pächter mit einem generierten Passwort geschickt und Pächter ist angemeldet
| Er trägt sein altes Passwort inkorrekt in das vorhergesehene Feld ein und
trägt zweimal richtig sein neues Passwort ein ODER ein Feld für das neue
Passwort stimmt mit dem anderen nicht überein ODER ein oder mehr Felder wurden
nicht ausgefüllt. +
  Button zum Passwort ändern wird getätigt
| Passwort wird nicht geändert, Fehlermeldung erscheint

|U-U-030
| Vorstandsvorsitzender sucht in der Datenbank nach Pächter
| Vorstandsvorsitzender ist eingeloggt und befindet sich auf "Pächter verwalten"
| Manager tippt einen Namen in das Suchfeld und klickt auf Suchen
| Fall 1: der gesuchte Name wird in der Datenbank gefunden und alle Ergebnisse aufgelistet,
+
Fall 2: wenn kein Ergebnis gefunden wird so wird angezeigt, dass keine Pächter unter dieser
Suchanfrage gefunden worden

|U-U-040
|Pächter will sich einloggen
|Pächter befindet sich auf der Login Seite
|Pächter gibt falsches Passwort ein
|Pächter wird nicht eingeloggt -> Fehlermeldung erscheint

|U-U-041
|Pächter will sich einloggen
|Pächter befindet sich auf der Login Seite
|Pächter gibt richtiges Passwort ein
|Pächter wird erfolgreich eingeloggt und hat nun Zugriff auf authentifizierte Seiten

| U-U-050
| Pächter wird Vorpächter
| Vorstandsvorsitzender ist eingeloggt, Pächter hat Parzelle gekündigt, neuer Pächter ist vorhanden
| Vorstandsvorsitzender geht auf die Pächterverwaltung und auf die Detailseite des Pächters und betätigt den "Pächter deaktivieren"- Button
| Pächter wird in der Vorpächterliste seiner Parzelle aufgenommen, seine Daten werden anonymisiert

| U-U-051
| Pächter wird Vorpächter
| Vorstandsvorsitzender ist eingeloggt, Pächter hat Parzelle gekündigt
| Vorstandsvorsitzender geht auf die Pächterverwaltung und auf die Detailseite des Pächters und betätigt den "Pächter deaktivieren"- Button
|Fehlermeldung erscheint, dass ein Pächter nur deaktiviert werden kann, wenn für seine Parzelle ein Nachpächter bestimmt ist

| U-U-060
| Rolle eines Pächters ändern
| Vorstandsvorsitzender ist eingeloggt
| Vorstandsvorsitzender befindet sich auf der Detailseite eines Pächters, geht auf Rolle ändern und wählt aus Drop-Down neue Rolle an, geht auf Speichern
| Rolle vom Pächter wird erfolgreich geändert

|===

=== PlotDepartment
zuständig Ylvi Sarah Bachmann und Albert Wellerdt

[options="headers"]
|===
|ID |Anwendungsfall |Vorbedingungen |Eingabe |Ausgabe
|P-U-010 |Parzelle erstellen |--      |Parzellengröße, Bereich, Schätzwert, Wasserzähler, Stromzähler | Parzelle wird erstellt, Attribute in passendem Format
|P-U-012 |Parzelle besetzt |Bewerbung angenommen      |Email des neuen Pächters dann auf besetzt | String "besetzt" wird ausgegeben
|P-U-013 |Parzelle besetzt |Bewerbung angenommen      |Email des neuen Pächters dann auf besetzt | Fehlermeldung Parzelle steht schon auf "taken"
|P-U-020 |Nebenpächter hinzufügen |Hauptpächter für Parzelle existiert  |Namen und Email des Nebenpächters | Nebenpächter erscheint in der Liste der Nebenpächter für eine Parzelle
|P-U-021 |Nebenpächter hinzufügen |Hauptpächter für Parzelle existiert  |Namen und Email des Nebenpächters | Fehlermeldung Nebenpächter mit dieser Email Adresse existiert bereits für die Parzelle
|P-U-022 |Hinzufügen der Arbeitsstunden und Wasserstand |Parzelle existiert und ein Hauptpächter  |Wasserzählerstand und gearbeitete Stunden | Werte stehen in der Procedure Klasse
|P-U-030 |selber Hauptpächter zu der selben Parzelle nochmal hinzufügen |Parzelle existiert und der Hauptpächter  |Tenant | Fehlermeldung der Hauptpächter existiert bereits für die Parzelle
|P-U-031 |Hauptpächter zur Parzelle hinzufügen |Parzelle existiert |Tenant | Hauptpächter kriegt seine Zelle angezeigt im Dashboard und in seiner eigenen Liste
|===

=== FinanceDepartment
zuständig: Sanghyun Lee und Sascha Seiffert
[options="headers"]
|===
|ID |Anwendungsfall |Vorbedingungen |Eingabe |Ausgabe
|F-U-001  |eine neue Rechnungsposition hinzufügen    |--                                                |Name, Preis und Menge von einer Position            |Die neue Position wird erstellt
|F-I-002 |Positionen generieren  |Vorgang(Procedure) existiert  |Button  |Rechnungspositionen werden aus dem Vorgang generiert
|F-U-003 |Positionen löschen  |Position existiert  |Bestätigung  |Rechnungspositionen werden gelöscht
|F-U-005  |eine Rechnungsposition bearbeiten        |Position existiert in Preisliste            |Name, Preis oder Menge von einen Position           |Die gewählte Position enthält einen neuen Wert
|F-U-010  |Rechnen Wasserkosten einer Parzelle              |Wasserzählerstand einer Parzelle                  |Wasserzählerstand (und Wasserkosten pro Kubikmeter)     |Ein Preis von Wasserkost einer Parzelle wird gerechnet
|F-U-015  |Rechnen Miete einer Parzelle                     |Größe einer Parzelle                              |Größe der Parzelle (und Miete pro Quadratmeter)       |Eine jährliche Miete der Parzelle wird gerechnet
|F-U-019 |Schätzen fehlender Rechnungspositionen  |Rechnung existiert, alle bekannten Positionen sind angelegt  |Alle Positionen  |Fehlende Kosten oder Verbräuche werden geschätzt
|F-U-020  |Rechnen eine jährliche Rechnung einer Parzelle   |Parzelle enthält alle nötige Daten für Berechnung |Wasser/Stromzählerstand und Größe der Parzelle        |Eine jährliche Rechnung der Parzelle wird erstellt
|F-I-021 |Versenden per E-Mail  |Rechnung ist erstellt  |Adressat und PDF  |Die Rechnung wird dem Empfänger zugestellt
|===

=== MessageDepartment
zuständig: Muhammad Talal Anwar
[options="headers"]
|===
| ID      | Anwendungsfall                        | Vorbedingungen                                                   | Eingabe           | Ausgabe
| M-U-010 | einen neuen News Eintrag machen       | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender | Text des Eintrags | Eintrag wird gespeichert
| M-U-020 | einen News Eintrag bearbeiten         | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender, und die Eintrag existiert | Änderung          | Eintrag wird aktualisiert
| M-U-030 | einen News Eintrag löschen            | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender, und die Eintrag existiert |          | Eintrag wird gelöscht
| M-I-040 | Nachricht ist ordnungsgemäß geschickt |                                                                  | Nachricht         | erfolgreich Assertion Test durch E-mail Test Server (https://asciidoctor.org[GreenMail])
|===
