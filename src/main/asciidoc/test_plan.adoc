// -- Table of Contents
:toc:
:toclevels: 3
:toc-title: Inhaltsverzeichnis
:toc-placement!:
:sectanchors:
:numbered:


= Test-Plan

Dieser Testplan stellt eine vereinfachte Version der IEEE 829-1998 Vorlage dar.

toc::[]

== Einführung
Dieses Dokument soll einen Überblick geben, wie getestet werden soll, inwiefern die Qualität der Anwendung gewährleistet wird.
Dabei werden die zu betrachteten Teilbereiche, die verwendeten Testverfahren und notwendige Rahmenbedingungen festgelegt.

Ebenfalls soll es für das Entwicklerteam eine Unterstützung bei ihrer Arbeit sein und unabhängigen Bewertern die Möglichkeit bieten,
die Qualität der Anwendung einzuschätzen.

== Aufbau der Testbezeichner
Nach welchem Schema sind die Tests benannt?

=== Department
[options="headers"]
|===
| Buchstabe | Zugehörigkeit des Departments
| T         | TenantDepartment
| P         | PlotDepartment
| F         | FinanceDepartment
| N         | NewsDepartment
| M         | MessageDepartment
| C         | ComplaintDepartment
| T         | TenantDepartment
| A         | ApplicationDepartment
| AP        | AppointmentDepartment
|===

=== Art
[options="headers"]
|===
| Buchstabe | Art des Tests
| U         | UnitTest
| I         | Integrationstest
|===

Die Test ID wird mit der fortlaufenden Zahl zur Identifikation des Tests im jeweiligen Department angehängt.

Beispiel: AP-U-01, P-U-02, F-I-03

== Test Gegenstände
Test Gegenstände sind die jeweiligen Verwaltungsebenen, bzw. die ausführenden Klassen (z.B. Controller).

== Zu testende Funktionalitäten
Zu testen sind die eigenen erstellten Klassen, welche die Eingaben entgegennehmen, diese verarbeiten oder an andere Bereiche weitergeben.

== Nicht zu testende Funktionalitäten
Bibliotheken von Drittanbietern (eigene Tests beschränken sich auf Schnittstelle, bzw. Zusammenspiel).
Zu diesen gehören beispielsweise Spring, Salespoint, Maven, Thymeleaf.

== Herangehensweise
- Klassen werden mit JUnit getestet.
- Integrationstest nach Bottom-Up Prinzip

== Umgebungsvoraussetzungen
*  Ein einsatzfähiges Computer System
* Zu testende Programme (Testobjekte)
* JUnit zur Erstellung von Unit Tests

== Testfälle und Verantwortlichkeit

=== TenantDepartment
zuständig: Isabell Zorr, Franziska Kiel
[options="headers"]
|===
|ID |Anwendungsfall |Vorbedingungen |Eingabe |Ausgabe
|U-U-010
| neuer Pächter wird erstellt
|Bewerbung wurde angenommen und Vorstandsvorsitzender ist eingeloggt
|Vorstandsvorsitzender füllt alle Felder aus und klickt auf "hinzufügen"
|Pächter wird erfolgreich in die Datenbank aufgenommen

|U-U-011
|neuer Pächter wird erstellt
|Bewerbung wurde angenommen und Vorstandsvorsitzender ist eingeloggt
|Vorstandsvorsitzender füllt eine der Felder nicht aus oder nicht korrekt (z.B beim Namen dürfen keine Zahlen sein)
| es wird kein neuer Pächter hinzugefügt und eine Fehlermeldung erscheint, dass das Feld fehlerhaft aufgefüllt ist bzw. nicht ausgefüllt wurde

|U-U-020
|Pächter muss sein generiertes Passwort ändern
|Vorstandsvorsitzender hat eine Email an den Pächter mit einem generierten Passwort geschickt und Pächter ist angemeldet
|Pächter trägt sein generiertes Passwort in das vorhergesehene Feld ein und
 trägt zweimal richtig sein neues Passwort ein und Button zum Passwort ändern wird getätigt
|Passwort wird erfolgreich geändert

|U-U-021
|Pächter muss sein generiertes Passwort ändern
|Vorstandsvorsitzender hat eine Email an den Pächter mit einem generierten Passwort geschickt und Pächter ist angemeldet
| Er trägt sein altes Passwort inkorrekt in das vorhergesehene Feld ein und
trägt zweimal richtig sein neues Passwort ein ODER ein Feld für das neue
Passwort stimmt mit dem anderen nicht überein ODER ein oder mehr Felder wurden
nicht ausgefüllt. +
  Button zum Passwort ändern wird getätigt
| Passwort wird nicht geändert, Fehlermeldung erscheint

|U-U-030
| Vorstandsvorsitzender sucht in der Datenbank nach Pächter
| Vorstandsvorsitzender ist eingeloggt und befindet sich auf "Pächter verwalten"
| Manager tippt einen Namen in das Suchfeld und klickt auf Suchen
| Fall 1: der gesuchte Name wird in der Datenbank gefunden und alle Ergebnisse aufgelistet,
+
Fall 2: wenn kein Ergebnis gefunden wird so wird angezeigt, dass keine Pächter unter dieser
Suchanfrage gefunden worden

|U-U-040
|Pächter will sich einloggen
|Pächter befindet sich auf der Login Seite
|Pächter gibt falsches Passwort ein
|Pächter wird nicht eingeloggt -> Fehlermeldung erscheint

|U-U-041
|Pächter will sich einloggen
|Pächter befindet sich auf der Login Seite
|Pächter gibt richtiges Passwort ein
|Pächter wird erfolgreich eingeloggt und hat nun Zugriff auf authentifizierte Seiten

| U-U-050
| Pächter wird Vorpächter
| Vorstandsvorsitzender ist eingeloggt, Pächter hat Parzelle gekündigt, neuer Pächter ist vorhanden
| Vorstandsvorsitzender geht auf die Pächterverwaltung und auf die Detailseite des Pächters und betätigt den "Pächter deaktivieren"- Button
| Pächter wird in der Vorpächterliste seiner Parzelle aufgenommen, seine Daten werden anonymisiert

| U-U-051
| Pächter wird Vorpächter
| Vorstandsvorsitzender ist eingeloggt, Pächter hat Parzelle gekündigt
| Vorstandsvorsitzender geht auf die Pächterverwaltung und auf die Detailseite des Pächters und betätigt den "Pächter deaktivieren"- Button
|Fehlermeldung erscheint, dass ein Pächter nur deaktiviert werden kann, wenn für seine Parzelle ein Nachpächter bestimmt ist

| U-U-060
| Rolle eines Pächters ändern
| Vorstandsvorsitzender ist eingeloggt
| Vorstandsvorsitzender befindet sich auf der Detailseite eines Pächters, geht auf Rolle ändern und wählt aus Drop-Down neue Rolle an, geht auf Speichern
| Rolle vom Pächter wird erfolgreich geändert

|===

=== PlotDepartment
zuständig Ylvi Sarah Bachmann

[options="headers"]
|===
|ID   |Akzeptanztest ID |Anwendungsfall ID  |Anwendungsfall |Vorbedingungen |Eingabe |Ausgabe / Nachbedingung
|P-U-010
|
|
|Erstellen einer Parzelle
|Nutzer hat die Rolle Vorstand
|Aufrufen des Formulars, Eingabe der Daten Parzellengröße, Beschreibung, Schätzwert
|Parzelle wird erstellt, Attribute in passendem Format

|P-U-011
|
|
|Erstellen einer Parzelle
|Nutzer hat andere Rolle als Admin
|Aufrufen des Formulars
|Fehlermeldung

|P-U-020
|
|
|Freigeben einer Parzelle
|Nutzer hat die Rolle Vorstand
|ausgewählte Parzelle
|Parzellenstatus wird auf FREE gesetzt

|P-U-021
|
|
|Freigeben einer Parzelle
|Nutzer hat andere Rolle als Admin
|ausgewählte Parzelle
|Fehlermeldung

|P-U-030
|
|
|Anzeigen der Parzellenübersicht
|Nutzer ist nicht angemeldet
|
|alle Parzellen haben ihre zugehörigen Farben (grün/grau)

|P-U-031
|
|
|Anzeigen der Parzellenübersicht
|Nutzer ist angemeldet
|
|alle Parzellen haben ihre zugehörigen Farben (grün/grau, besondere Farben für Obmann- und Vorstandsparzelle)

|P-U-032
|
|
|Anzeigen der Parzellenübersicht
|Nutzer ist nicht angemeldet
|
|Zugriff nur auf Detailseiten von freien Parzellen

|P-U-033
|
|
|Anzeigen der Parzellenübersicht
|Nutzer ist angemeldet
|
|Zugriff auf Detailseiten der Parzellen nach Rolle des Nutzers

|P-U-040
|
|
|Anzeigen der Informationen einer Parzelle
|Parzelle ist nicht vermietet
|gewünschte Parzelle
|PlotInformationBuffer mit den allgemeinen Informationen der Parzelle wird erstellt

|P-U-041
|
|
|Anzeigen der Informationen einer Parzelle
|Parzelle ist vermietet
|gewünschte Parzelle
|PlotInformationBuffer mit den Informationen der Parzelle wird erstellt

|P-U-042
|
|
|Anzeigen der Informationen einer Parzelle
|Parzelle ist vermietet, Nutzer ist angemeldet
|gewünschte Parzelle
|Model enthält Zugriffsrechte des Nutzers abhängig von seiner Rolle

|P-U-043
|
|
|Anzeigen der Informationen einer Parzelle
|Parzelle ist vermietet, Nutzer mietet die Parzelle und ist angemeldet
|gewünschte Parzelle
|Model enthält Zugriffsrechte des Nutzers

|P-U-050
|
|
|Hinzufügen eines Obmanns
|Nutzer hat die Rolle Vorstand
|Aufrufen des Formulars
|Formular wird angezeigt

|P-U-051
|
|
|Hinzufügen eines Obmanns
|Nutzer hat andere Rolle als Admin
|Aufrufen des Formulars
|Fehlermeldung

|P-I-010
|**<<AT0010>>**
|**<<UC0010>>**
|Bewerben für eine Parzelle
|Parzelle hat den Status FREE
|Model mit Parzelle
|String "/createApplication"

|P-I-011
|
|**<<UC0010>>**
|Bewerben für eine Parzelle
|Parzelle hat den Status TAKEN, Nutzer ist nicht angemeldet
|Model mit Parzelle
|Fehlermeldung

|P-I-012
|**<<AT0011>>**
|**<<UC0010>>**
|Ansehen von Bewerbungen für eine Parzelle
|Nutzer hat Rolle Vorstand
|Model mit Parzelle
|String "/showApplications"

|P-I-013
|
|**<<UC0010>>**
|Ansehen von Bewerbungen für eine Parzelle
|Nutzer hat andere Rolle als Obmann
|Model mit Parzelle
|Fehlermeldung

|P-I-020
|
|
|Hinzufügen des Wasserzählerstands
|Nutzer hat die Rolle Obmann, Parzelle hat den Status TAKEN
|gewünschte Parzelle
|String "/editPlot"

|P-I-030
|**<<AT0030>>**
|**<<UC0030>>**
|Eintragen des Elektrozählerstands
|Parzelle hat den Status TAKEN
|gewünschte Parzelle
|String "/editPlot"

|P-I-031
|
|**<<UC0030>>**
|Eintragen des Elektrozählerstands
|Nutzer ist nicht angemeldet
|gewünschte Parzelle
|Fehlermeldung

|P-I-040
|**<<AT0031>>**
|**<<UC0030>>**
|Aufrufen der Rechnungen
|Nutzer hat die Rolle Vorstand
|Parzelle
|String "/bill/"

|P-I-041
|**<<AT0031>>**
|**<<UC0030>>**
|Aufrufen der Rechnungen
|Nutzer hat die Rolle Pächter
|Parzelle
|Model mit Rechnungen mit gegebenem Nutzer für die Parzelle

|P-I-050
|
|
|Anzeigen der Parzellenübersicht
|Nutzer ist nicht angemeldet
|Nutzer lässt sich die Übersichtsseite aller Parzellen anzeigen
|Model mit den benötigten Einträgen wird erstellt und es enthält nicht das Recht Parzellen hinzu zu fügen.

|P-I-051
|
|
|Anzeigen der Parzellenübersicht
|Nutzer ist angemeldet
|Nutzer lässt sich die Übersichtsseite aller Parzellen anzeigen
|Zugriff auf Detailseiten der Parzellen nach Rolle des Nutzers

|===

=== FinanceDepartment
zuständig: SangHyun Lee und Sascha Seiffert
[options="headers"]
|===
| ID      | Anwendungsfall                                 | Vorbedingungen                                              | Eingabe                                             | Ausgabe
| F-U-003 | Rechnen Wasserkosten einer Parzelle            | Wasserzählerstand einer Parzelle                            | Wasserzählerstand (und Wasserkosten pro Kubikmeter) | Ein Preis von Wasserkost einer Parzelle wird gerechnet
| F-U-005 | Rechnen Stromkosten einer Parzelle             | Stromzählerstand einer Parzelle                             | Stromzählerstand (und Stromkosten pro Kilowatt)     | Ein Preis von Stromkost einer Parzelle wird gerechnet
| F-U-007 | Rechnen Miete einer Parzelle                   | Größe einer Parzelle                                        | Größe der Parzelle (und Miete pro Quadratmeter)     | Eine jährliche Miete der Parzelle wird gerechnet
| F-U-015 | Schätzen fehlender Rechnungspositionen         | Rechnung existiert, alle bekannten Positionen sind angelegt | Alle Positionen                                     | Fehlende Kosten oder Verbräuche werden geschätzt
| F-U-020 | Rechnen eine jährliche Rechnung einer Parzelle | Parzelle enthält alle nötige Daten für Berechnung           | Wasser/Stromzählerstand und Größe der Parzelle      | Eine jährliche Rechnung der Parzelle wird erstellt
| F-U-023 | Erstellen eine jährliche Rechnung in PDF       | Rechnung ist erstellt                                       | Button                                              | Eine jährliche Rechnung der Parzelle wird in PDF erstellt
|===

=== NewsDepartment
zuständig: Muhammad Talal Anwar
[options="headers"]
|===
| ID      | Anwendungsfall                  | Vorbedingungen                                                                              | Eingabe           | Ausgabe
| N-U-010 | Einen neuen News Eintrag machen | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender                            | Text des Eintrags | Eintrag wird gespeichert
| N-U-020 | Einen News Eintrag bearbeiten   | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender, und die Eintrag existiert | Änderung          | Eintrag wird aktualisiert
| N-U-030 | Einen News Eintrag löschen      | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender, und die Eintrag existiert |                   | Eintrag wird gelöscht
|===

=== MessageDepartment
zuständig: Muhammad Talal Anwar
[options="headers"]
|===
| ID      | Anwendungsfall                                        | Vorbedingungen | Eingabe                  | Ausgabe
| M-I-010 | Eine normale Email ist ordnungsgemäß geschickt        |                | Nachricht                | erfolgreich Assertion Test durch E-mail Test Server (http://www.icegreen.com/greenmail/[GreenMail])
| M-I-020 | Eine Email mit Attachment ist ordnungsgemäß geschickt |                | Nachricht mit Attachment | erfolgreich Assertion Test durch E-mail Test Server (http://www.icegreen.com/greenmail/[GreenMail])
|===

=== ComplaintDepartment
zuständig: Muhammad Talal Anwar und Isabell Zorr
[options="headers"]
|===
| ID      | Anwendungsfall                       | Vorbedingungen                                                               | Eingabe                  | Ausgabe
| C-U-010 | Eine Beschwerde erstellen            | Benutzer ist eingeloggt und hat die Rolle: Haupt-/Nebenpächter               | Subjekt und Beschreibung | Beschwerde wird gespeichert und einem Obmann zugeordnet
| C-U-020 | Eine Beschwerde bearbeiten           | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender oder Obmann | Änderung                 | Beschwerde wird aktualisiert
| C-U-030 | Zustand der Beschwerde ändern        | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender oder Obmann | Änderung                 | Zustand wird aktualisiert
| C-U-040 | Neuer Obmann zur Beschwerde zuordnen | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender             | Neuer Obmann auswählen   | Neuer Obmann wird zugeordnet
| C-U-050 | Eine Beschwerde löschen              | Benutzer ist eingeloggt und hat die Rolle: Vorstandsvorsitzender             |                          | Beschwerde wird gelöscht
|===

=== ApplicationDepartment
zuständig: Sascha Seiffert
[options="headers"]
|===
| ID      | Anwendungsfall                        | Vorbedingungen                                                   | Eingabe           | Ausgabe
| A-U-001 | Bewerbung erstellen       | Parzelle frei   | Name und E-Mail  | -
| A-U-011 | Bewerbung annehmen         | Bewerbung existiert, Status "new" | Button          | Eintrag wird aktualisiert
| A-U-012 | Bewerbung ablehnen            | Bewerbung existiert, Status "new" | Button         | Eintrag wird aktualisiert
| A-U-020 | Bewerbung abschließen  | Bewerbung für Parzelle mit Status "accepted"  | -  | neuer Tenant, alle Bewerbungen auf "hidden"
|===

=== AppointmentDepartment
zuständig: Albert Wellerdt
[options="headers"]
|===
| ID      | Anwendungsfall                        | Vorbedingungen                                                   | Eingabe           | Ausgabe
| AP-U-001 | Termin erstellen       | Zeit existiert für dieses Datum noch nicht   | Zeit, Datum  | Termin(Zeit, Datum)
| AP-U-011 | Termin löschen        | Termin existiert bereits | Button          | Eintrag wird gelöscht
| AP-U-012 | Termin bearbeiten            | Termin existiert bereits, neue Zeit existiert noch nicht | Button         | Termin wird aktualisiert
|===
